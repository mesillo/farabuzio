<!DOCTYPE html>
<html>
	<head>
		<title>Test Node MCU</title>
	</head>
	<script type="text/javascript">
		let webSocket = null;
		const toggleLed = () => {
			const xhr = new XMLHttpRequest();
			xhr.open( "GET", "/toggleLed" );
			xhr.onload = () => {
				if( xhr.status === 200 ) {
					console.log( xhr.responseText );
				} else {
					console.error( "Error: " + xhr.status );
				}
			};
			xhr.send();
		};
		const showData = ( data ) => {
			document.getElementById( "potentiometerValue" ).innerHTML = data;
		};
		const webSocketConnect = () => {
			const hostname = window.location.hostname;
			webSocket = new WebSocket( `ws://${hostname}:81/`, [ "arduino" ] ); // are "arduino" mandatory???
			webSocket.onmessage = ( event ) => {
				//console.dir( event.data );
				showData( event.data );
			}
		};
	</script>
	<body>
		<h1>Hello Home Page!</h1>
		<button onclick="toggleLed"> Toggle AUX LED </button>
		Value: <b><div id="potentiometerValue"></div></b>
		<script type="text/javascript">
			webSocketConnect();
		</script>
	</body>
</html>